extends ../layouts/dashboard.pug
block content 
    h2(class="container") dashboard 

    if (msg)
        div(class="messages container")
            if (msg.error)
                div(class="alert alert-danger") #{ msg.error }
            if (msg.success)
                div(class="alert alert-success") #{msg.success}
    div(class="card ms-auto me-auto mt-5 pt-4 pb-5" style="max-width:1350px; min-width:768px;")
        div(class="card-body container")
            form(action="/customer/add" method="post" class="row")
                div(class="col ps-0 pe-1")
                    input(type="text" class="form-control" id="firstName" placeholder="Imie" name="firstName")
                div(class="col ps-0 pe-1")
                    input(type="text" class="form-control" id="lastName" placeholder="Nazwisko" name="lastName")
                div(class="col ps-0 pe-1")
                    input(type="text" class="form-control" id="number" placeholder="Numer" name="number")
                
                div(class="col ps-0 pe-1")
                    select#propertyType.select.form-control.input-lg(data-discount name='discountId')
                        option(value="0" discount="0") Zni≈ºka
                        each val in discounts
                            option(value=val.dataValues.id discount=val.dataValues.discount) #{val.dataValues.name} (#{val.dataValues.discount} %)
                    
                div(class="col ps-0 pe-1")
                    select#propertyType.select.form-control.input-lg(data-price name='ticketType')
                        option(value="") Karnet
                        each val in types
                            option(data-price-option value=val.dataValues.id price=val.dataValues.price) #{val.dataValues.name}
                div(class="col ps-0 pe-1")
                    input(type="text" class="form-control" id="code" placeholder="kod karnetu" name="code")

                button(type="submit" class="btn btn-primary btn-sm col-1") dodaj
            div(class="mt-5" style="overflow: hidden;")
                table(class="table")
                    thead(class="thead-dark")
                    thead(class="thead-dark")
                        tr 
                            th(scope="col") #
                            th(scope="col") Imie
                            th(scope="col") Nazwisko
                            th(scope="col") Numer
                            th(scope="col") karnet
                            th(scope="col") Koniec karnetu
                            th(scope="col") Status
                    tbody()
                        each customer in customers
                            tr 
                                th(scope="row")
                                td #{customer.firstName}
                                td #{customer.lastName}
                                td #{customer.number}
                                td #{customer.code}
                                td #{customer.dataTo}
                                if (customer.active == true)
                                    td aktywny
                                else if (customer.active == false)
                                    td nie aktywny
                        
                            
                            

        